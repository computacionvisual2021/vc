<!DOCTYPE html><html><head><title>vc</title><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><meta name="robots" content="index,follow"><meta name="theme-color" content="#212121"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><link href="https://fonts.googleapis.com/css?family=Hind:400,700&amp;display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:300,400&amp;display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/icon?family=Material+Icons%7CMaterial+Icons+Outlined&amp;display=swap" rel="stylesheet"><style>
      body, input, button {
        font-family: 'Hind', sans-serif;
      }

      code, .hljs {
        font-family: 'Source Code Pro', 'Courier New', Courier, monospace;
      }

      .icon-font {
        font-family: 'Material Icons';
        font-weight: normal;
        font-style: normal;
        font-size: 24px;  /* Preferred icon size */
        display: inline-block;
        line-height: 1;
        text-transform: none;
        letter-spacing: normal;
        word-wrap: normal;
        white-space: nowrap;
        direction: ltr;
      
        /* Support for all WebKit browsers. */
        -webkit-font-smoothing: antialiased;
        /* Support for Safari and Chrome. */
        text-rendering: optimizeLegibility;
      
        /* Support for Firefox. */
        -moz-osx-font-smoothing: grayscale;
      
        /* Support for IE. */
        font-feature-settings: 'liga';
      }

      .icon-font.outline {
        font-family: 'Material Icons Outlined';
      }
    </style><link href="/vc/docs/assets/codedoc-styles.css" rel="stylesheet"><script async="" defer="" src="/vc/docs/assets/codedoc-bundle.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous"></head><body><div class="header-0-0-7"><script async="" defer="" src="https://buttons.github.io/buttons.js"></script><a class="github-button" data-color-scheme="no-preference: light; light: light; dark: dark;" data-icon="octicon-star" data-show-count="false" data-size="large" href="https://github.com/computacionvisual2021/vc/">Star</a><br><br><a class="watermark-0-0-6" href="https://github.com/CONNECT-platform/codedoc" target="_blank">Created With<svg viewBox="0 0 536 296" version="1.1" xmlns="http://www.w3.org/2000/svg"><g id="codedoc" transform="translate(-244.000000, -364.000000)" fill-rule="nonzero"><path d="M580,532 C615.346224,532 644,560.653776 644,596 C644,631.346224 615.346224,660 580,660 C544.653776,660 516,631.346224 516,596 C516,560.653776 544.653776,532 580,532 Z M716,532 C751.346224,532 780,560.653776 780,596 C780,631.346224 751.346224,660 716,660 L692,660 C687.581722,660 684,656.418278 684,652 C684,647.581722 687.581722,644 692,644 L716,644 C742.509668,644 764,622.509668 764,596 C764,569.490332 742.509668,548 716,548 L692,548 C687.581722,548 684,544.418278 684,540 C684,535.581722 687.581722,532 692,532 L716,532 Z M468,532 C472.418278,532 476,535.581722 476,540 L476,652 C476,656.418278 472.418278,660 468,660 L444,660 C408.653776,660 380,631.346224 380,596 C380,560.653776 408.653776,532 444,532 L468,532 Z M332,532 C336.418278,532 340,535.581722 340,540 L340,652 C340,656.418278 336.418278,660 332,660 L252,660 C247.581722,660 244,656.418278 244,652 L244,540 C244,535.581722 247.581722,532 252,532 L332,532 Z M580,548 C553.490332,548 532,569.490332 532,596 C532,622.509668 553.490332,644 580,644 C606.509668,644 628,622.509668 628,596 C628,569.490332 606.509668,548 580,548 Z M461,548 L444,548 C417.490332,548 396,569.490332 396,596 C396,622.509668 417.490332,644 444,644 L461,644 L461,548 Z M444,364 C479.346224,364 508,392.653776 508,428 C508,463.346224 479.346224,492 444,492 C408.653776,492 380,463.346224 380,428 C380,392.653776 408.653776,364 444,364 Z M332,364 C336.418278,364 340,367.581722 340,372 C340,376.418278 336.418278,380 332,380 L308,380 C281.490332,380 260,401.490332 260,428 C260,454.509668 281.490332,476 308,476 L332,476 C336.418278,476 340,479.581722 340,484 C340,488.418278 336.418278,492 332,492 L308,492 C272.653776,492 244,463.346224 244,428 C244,392.653776 272.653776,364 308,364 L332,364 Z M580,364 C615.346224,364 644,392.653776 644,428 C644,463.346224 615.346224,492 580,492 L556,492 C551.581722,492 548,488.418278 548,484 L548,372 C548,367.581722 551.581722,364 556,364 L580,364 Z M772,364 C776.418278,364 780,367.581722 780,372 C780,376.418278 776.418278,380 772,380 L700,380 L700,420 L772,420 C776.418278,420 780,423.581722 780,428 C780,432.418278 776.418278,436 772,436 L700,436 L700,476 L772,476 C776.418278,476 780,479.581722 780,484 C780,488.418278 776.418278,492 772,492 L692,492 C687.581722,492 684,488.418278 684,484 L684,372 C684,367.581722 687.581722,364 692,364 L772,364 Z M444,380 C417.490332,380 396,401.490332 396,428 C396,454.509668 417.490332,476 444,476 C470.509668,476 492,454.509668 492,428 C492,401.490332 470.509668,380 444,380 Z M580,380 L563,380 L563,476 L580,476 C606.509668,476 628,454.509668 628,428 C628,401.490332 606.509668,380 580,380 Z"></path></g></svg></a></div><div id="-codedoc-container" class="container"><marker><h1 align="center">Máscaras de Convolución</h1>

</marker><h1 id="antecedentes" class="heading-0-0-1"><span class="anchor-0-0-2" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Antecedentes</h1><p>Las máscaras de Convolución son una manera de aplicar efecto a las representaciones gráficas y obtener nuevos efectos o asignaciones de color a partir de operaciones matemáticas. Usualmente se hace uso de la llamada <strong><em>matriz de convolución</em></strong> que incluye los valores de color de la imagen/elemento original y el <strong><em>kernel</em></strong> el cual es una matriz cuadrada que contiene pesos definidos que alteran los valores de los pixeles según su magnitud. La operación de convolución se expresa matemáticamente de la siguiente manera:</p><p>Sea <strong><em>I</em></strong> la matriz de los valores de color de una imagen, y <strong><em>K</em></strong> el kernel de un filtro determinado, entonces la matriz de la imagen filtrada <strong><em>G</em></strong> se calculará como:</p><div class="formula-0-0-21 center "><div data-formula="G(x,y) = K(dx, dy) * I(x, y) = \sum_{dx=-a}^{a} \sum_{dy=-b}^{b} K(dx,dy) * I(x+dx,y+dy)," class="line-0-0-22"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><mo>=</mo><mi>K</mi><mo stretchy="false">(</mo><mi>d</mi><mi>x</mi><mo separator="true">,</mo><mi>d</mi><mi>y</mi><mo stretchy="false">)</mo><mo>∗</mo><mi>I</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><mo>=</mo><msubsup><mo>∑</mo><mrow><mi>d</mi><mi>x</mi><mo>=</mo><mo>−</mo><mi>a</mi></mrow><mi>a</mi></msubsup><msubsup><mo>∑</mo><mrow><mi>d</mi><mi>y</mi><mo>=</mo><mo>−</mo><mi>b</mi></mrow><mi>b</mi></msubsup><mi>K</mi><mo stretchy="false">(</mo><mi>d</mi><mi>x</mi><mo separator="true">,</mo><mi>d</mi><mi>y</mi><mo stretchy="false">)</mo><mo>∗</mo><mi>I</mi><mo stretchy="false">(</mo><mi>x</mi><mo>+</mo><mi>d</mi><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo>+</mo><mi>d</mi><mi>y</mi><mo stretchy="false">)</mo><mo separator="true">,</mo></mrow><annotation encoding="application/x-tex">G(x,y) = K(dx, dy) * I(x, y) = \sum_{dx=-a}^{a} \sum_{dy=-b}^{b} K(dx,dy) * I(x+dx,y+dy),</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">G</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="mopen">(</span><span class="mord mathdefault">d</span><span class="mord mathdefault">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">d</span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.424826em;vertical-align:-0.43581800000000004em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.804292em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">d</span><span class="mord mathdefault mtight">x</span><span class="mrel mtight">=</span><span class="mord mtight">−</span><span class="mord mathdefault mtight">a</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">a</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.35804100000000005em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9890079999999999em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">d</span><span class="mord mathdefault mtight" style="margin-right:0.03588em;">y</span><span class="mrel mtight">=</span><span class="mord mtight">−</span><span class="mord mathdefault mtight">b</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">b</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.43581800000000004em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="mopen">(</span><span class="mord mathdefault">d</span><span class="mord mathdefault">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">d</span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">d</span><span class="mord mathdefault">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">d</span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mpunct">,</span></span></span></span><span class="counter">1</span></div></div><p>donde los elementos de <strong><em>K</em></strong> cumplen: <span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mi>a</mi><mo>≤</mo><mi>d</mi><mi>x</mi><mo>≤</mo><mi>a</mi></mrow><annotation encoding="application/x-tex">-a \leq dx \leq a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mord">−</span><span class="mord mathdefault">a</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83041em;vertical-align:-0.13597em;"></span><span class="mord mathdefault">d</span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">a</span></span></span></span></span> y <span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mi>b</mi><mo>≤</mo><mi>d</mi><mi>y</mi><mo>≤</mo><mi>b</mi></mrow><annotation encoding="application/x-tex">-b \leq dy \leq b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83041em;vertical-align:-0.13597em;"></span><span class="mord">−</span><span class="mord mathdefault">b</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">d</span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">b</span></span></span></span></span>. Por tanto el proceso de convolución es la accion de sumar cada elemento de la imagen a sus vecinos próximos ponderados por el kernel. Sin embargo la convolucián no consiste en la multiplicacián de matrices habitual. Es usual usar kernels de tamaño 3x3 (a pesar de que existen de mayor tamaño), la operación de convolución corresponderá a situar el elemento del centro del kernel en el pixel a analizar. El kernel se solapará con los valores vecinos alrededor del centro, por lo que cada elemento del kernel debe multiplicarse con el valor que está solapando y finalmente todos los valores deben sumarse para dar como resultado el nuevo valor del pixel analizado (que se solapa por el centro del kernel). La imagen a continuación muestra gráficamente este proceso:</p><marker><div>
<p style="text-align:center;">
<img src="/vc/docs/img/convolution2.png" width="500/">
</p>
</div>

</marker><p><a href="https://programmerclick.com/images/833/7140bcc7002f1d51bb30d256dcc7fee9.png">Convolution Process Image</a></p><p>En caso de que el kernel tenga mayores dimensiones, la operación de convolución requiere que las filas y columnas del kernel se intercambien horizontal y verticalmente antes de realizar calculos. Adicionalmente se debe manejar una estrategia para los bordes de una imagen, ya que en las operaciones, una parte del kernel se situará por fuera de la imagen; para esto se puede adoptar una de las siguientes convenciones:</p><ul><li><strong>Extend:</strong> Los pixeles mas cercanos al borde se extienden para tener los valores necesarios para la convolución.</li><li><strong>Wrap:</strong> Se toman los pixeles necesarios para la convolución del extremo opuesto al que se requieren, por ejemplo si el kernel necesita solaparse con 3 pixeles del borde superior de la imagen entonces tomará los correspondientes del borne inferior de la misma.</li><li><strong>Mirror:</strong> Se reflejan los pixeles necesarios, por ejemplo si se desea un pixel que esta 2 unidades afura, se toma como el correspondiente 2 unidades hacia dentro de la imagen.</li><li><strong>Crop:</strong> No se hacen calculos para los pixeles del borde lo que resulta en una imagen un poco más pequeña.</li></ul><p>Dependiendo de los valores, un kernel puede generar diferentes efectos, entre los más comunes se encuentran la detección de bordes, difuminación, emboss (identificación de sombras o brillos). En el presente taller se detallará en la implementación de convoluciones, tanto de las que hacen uso de un kernel como algunas especiales que no (ver pestaña <strong><em>Máscaras video</em></strong>). Para esto a continuación en la pestaña <strong><em>Máscaras Imagen</em></strong> se podrá visualizar la implementación de algunas convoluciones mencionadas anteriormente aplicadas a una imagen por medio de shadders en WEBGL, lo cual permite que se ejecute el código directamente en la unidad de procesamiento gráfica GPU. Se crea una textura con la imagen y a esa textura se le aplica la matriz de convolución correspondiente según el usuario especifique con las siguientes teclas:</p><table><thead><th style="text-align: center">Tecla</th><th style="text-align: center">Máscara</th></thead><tbody><tr><td style="text-align: center">0</td><td style="text-align: center">Identidad (Original)</td></tr><tr><td style="text-align: center">1</td><td style="text-align: center">Emboss</td></tr><tr><td style="text-align: center">2</td><td style="text-align: center">Outline (Edge Detection)</td></tr><tr><td style="text-align: center">3</td><td style="text-align: center">Sharpen</td></tr><tr><td style="text-align: center">4</td><td style="text-align: center">Top Sobel</td></tr><tr><td style="text-align: center">5</td><td style="text-align: center">Gaussian Blur</td></tr><tr><td style="text-align: center">6</td><td style="text-align: center">Left Sobel</td></tr></tbody></table><p>La representación de la imagen convolucionada se visualizará aplicada a una elipse y a un cubo que rota, con el ánimo de explorar una de las capacidades de WEBGL que es el manejo de elementos en 3D. De igual manera veremos como la luz puede afectar principalmente a el mencionado objeto 3D al pasar el cursor sobre el mismo y ver como la luz de distorsiona sobre el objeto (se observa mejor al dejar el cursor estático en un lugar cerca al cubo).</p><p>En la pestaña <strong><em>Máscaras Video</em></strong> se visualizan otras máscaras pero esta vez aplicadas a la captura de video por cámara en tiempo real. El video responde a los comandos por teclas mostrados en la siguiente tabla, igualmente aplicando las texturas a un shader de WEBGL.</p><table><thead><th style="text-align: center">Tecla</th><th style="text-align: center">Máscara</th></thead><tbody><tr><td style="text-align: center">0</td><td style="text-align: center">Identidad (Original)</td></tr><tr><td style="text-align: center">1</td><td style="text-align: center">RGB Negative ?</td></tr><tr><td style="text-align: center">2</td><td style="text-align: center">Inverse</td></tr><tr><td style="text-align: center">3</td><td style="text-align: center">Single Pass Blur</td></tr><tr><td style="text-align: center">4</td><td style="text-align: center">Outline (Edge Detection)</td></tr><tr><td style="text-align: center">5</td><td style="text-align: center">Emboss</td></tr></tbody></table><p>Para este caso, las máscaras denominadas como <strong><em>RGB Negative e Inverse</em></strong> no hacen uso de un kernel como tal sino que efectuan operaciones determinadas sobre cada color de la imagen, están incluidas a causa de su aplicación en la transformación de imagenes.</p><p>Por su parte, la pestaña <strong><em>Instrucciones</em></strong> describe un paso a paso del proceso de convolución de los elementos mencionados (imagen y video) ya que son pasos en su mayoría similares; Iniciando con la creación de los shaders respectivos a partir de los <strong><em>Fragment Shader y Vertex Shader</em></strong> correspondientes, una vez creado el canvas tipo WEBGL se pasan los datos de imagen o video al fragment shader para que identifique según la tecla presionada por el usuario que tipo de máscara de convolución desea. Por último el <strong><em>Fragment Shader</em></strong> realiza las operaciones de la máscara deseada y devuelve el renderizado de la imagen/video para ser mostrada.</p><p>Finalmente, las pestañas <strong><em>Código Imagen y Código Video</em></strong> muestran el código de implementación para los fragment shaders usados en la imagen y el video respectivamente, ambos tienen comentarios de su funcionamiento para mayor comprensión.</p><h1 id="solucin-y-resultados" class="heading-0-0-1"><span class="anchor-0-0-2" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Solución y Resultados</h1><div class="tabs-0-0-20"><script id="psJDuMIAjm">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("psJDuMIAjm", "6jzvkXXQW/pnjrYP6mla2g==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script><div class="tab first selected" data-tab-title="Máscaras Imagen" data-tab-id="Máscaras Imagen"><iframe id="MascarasImagen" class="p5-0-0-13 center" style="width: 1020px; height: 430px" srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.3.1/p5.min.js></script>
            <script src=/vc/docs/sketches/workshop2/MascarasImagen.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe></div><div class="tab" data-tab-title="Máscaras Video" data-tab-id="Máscaras Video"><iframe id="MascarasVideo" class="p5-0-0-13 center" style="width: 740px; height: 420px" srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.3.1/p5.min.js></script>
            <script src=/vc/docs/sketches/workshop2/MascarasVideo.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe></div><div class="tab" data-tab-title="Instrucciones" data-tab-id="Instrucciones"><table><thead><th>No.</th><th>Descripción</th></thead><tbody><tr><td>1</td><td>Precargar Shader para imagen/ video con el vertex y fragment shader.</td></tr><tr><td>2</td><td>Dividir el área a lo largo de una línea horizontal o vertical.</td></tr><tr><td>3</td><td>Seleccionar una de las dos nuevas celdas de partición.</td></tr><tr><td>4</td><td>Realizar nuevamente el paso numero 2.</td></tr><tr><td>5</td><td>A partir de la tecla presionada por el usuario se definen los valores de la matriz kernel de convolución (si aplica).</td></tr><tr><td>6</td><td>En el caso de Imagen (y algunas máscaras de Video) se obtienen los pixeles vecinos por cada pixel.</td></tr><tr><td>7</td><td>Se realiza la operación de convolución con el kernel o valores correspondientes a cada pixel.</td></tr><tr><td>8</td><td>Con el vector del nuevo color renderiza este valor producto de la convolución y se muestra en pantalla.</td></tr><tr><td>9</td><td>En el caso de Imagen, aplicar la textura renderizada en 2D(elipse) y 3D (cubo).</td></tr></tbody></table></div><div class="tab" data-tab-title="Código Imagen" data-tab-id="Código Imagen"><pre class="with-bar"><code class="glsl -codedoc-code-snippet code-0-0-14" tabindex="0"><span class="wmbar-0-0-19"><span></span><span></span><span></span><span>convMask.frag</span></span><div class="line-0-0-18  -codedoc-code-line" data-content="varying vec2 vTexCoord;" id="code1-l1"><span class="lineCounter-0-0-15 prim -codedoc-line-counter">1<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">varying</span> <span class="token keyword">vec2</span> vTexCoord<span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="// Valores que se pasan desde p5" id="code1-l2"><span class="lineCounter-0-0-15 -codedoc-line-counter">2<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token comment">// Valores que se pasan desde p5</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="uniform sampler2D u_img;" id="code1-l3"><span class="lineCounter-0-0-15 -codedoc-line-counter">3<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">uniform</span> <span class="token keyword">sampler2D</span> u_img<span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="uniform int u_key;" id="code1-l4"><span class="lineCounter-0-0-15 -codedoc-line-counter">4<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">uniform</span> <span class="token keyword">int</span> u_key<span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="uniform vec2 stepSize; //Tama&amp;ntilde;o del texel a usar para cada paso ( 1.0 / width)" id="code1-l5"><span class="lineCounter-0-0-15 prim -codedoc-line-counter">5<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">uniform</span> <span class="token keyword">vec2</span> stepSize<span class="token punctuation">;</span> <span class="token comment">//Tama&amp;ntilde;o del texel a usar para cada paso ( 1.0 / width)</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code1-l6"><span class="lineCounter-0-0-15 -codedoc-line-counter">6<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="//Arreglo de 9 valores, cada uno representa un valor alrederor de un pixel (vecinos) " id="code1-l7"><span class="lineCounter-0-0-15 -codedoc-line-counter">7<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token comment">//Arreglo de 9 valores, cada uno representa un valor alrederor de un pixel (vecinos) </span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="// y el pixel mismo" id="code1-l8"><span class="lineCounter-0-0-15 -codedoc-line-counter">8<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token comment">// y el pixel mismo</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="vec2 offset[9];" id="code1-l9"><span class="lineCounter-0-0-15 -codedoc-line-counter">9<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">vec2</span> offset<span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code1-l10"><span class="lineCounter-0-0-15 prim -codedoc-line-counter">10<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="// Arreglo con los valores de la matriz de convolucion a usar" id="code1-l11"><span class="lineCounter-0-0-15 -codedoc-line-counter">11<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token comment">// Arreglo con los valores de la matriz de convolucion a usar</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="float kernel[9];" id="code1-l12"><span class="lineCounter-0-0-15 -codedoc-line-counter">12<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">float</span> kernel<span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code1-l13"><span class="lineCounter-0-0-15 -codedoc-line-counter">13<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="// valor de convolucion que sera renderizado en la pantalla" id="code1-l14"><span class="lineCounter-0-0-15 -codedoc-line-counter">14<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token comment">// valor de convolucion que sera renderizado en la pantalla</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="vec4 conv = vec4(0.0);" id="code1-l15"><span class="lineCounter-0-0-15 prim -codedoc-line-counter">15<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">vec4</span> conv <span class="token operator">=</span> <span class="token keyword">vec4</span><span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code1-l16"><span class="lineCounter-0-0-15 -codedoc-line-counter">16<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="void main() {" id="code1-l17"><span class="lineCounter-0-0-15 -codedoc-line-counter">17<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="  vec2 uv = vTexCoord;" id="code1-l18"><span class="lineCounter-0-0-15 -codedoc-line-counter">18<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token keyword">vec2</span> uv <span class="token operator">=</span> vTexCoord<span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code1-l19"><span class="lineCounter-0-0-15 -codedoc-line-counter">19<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="  //Invierte la posicion de la cordenada  para que la imagen no quede alrreves" id="code1-l20"><span class="lineCounter-0-0-15 prim -codedoc-line-counter">20<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token comment">//Invierte la posicion de la cordenada  para que la imagen no quede alrreves</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="  uv.y = 1.0 - uv.y;" id="code1-l21"><span class="lineCounter-0-0-15 -codedoc-line-counter">21<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  uv<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">1.0</span> <span class="token operator">-</span> uv<span class="token punctuation">.</span>y<span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code1-l22"><span class="lineCounter-0-0-15 -codedoc-line-counter">22<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="  // identity kernel " id="code1-l23"><span class="lineCounter-0-0-15 -codedoc-line-counter">23<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token comment">// identity kernel </span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="  kernel[0] = 0.0; kernel[1] = 0.0; kernel[2] = 0.0;" id="code1-l24"><span class="lineCounter-0-0-15 -codedoc-line-counter">24<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  kernel<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="  kernel[3] = 0.0; kernel[4] = 1.0; kernel[5] = 0.0;" id="code1-l25"><span class="lineCounter-0-0-15 prim -codedoc-line-counter">25<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  kernel<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1.0</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="  kernel[6] = 0.0; kernel[7] = 0.0; kernel[8] = 0.0;" id="code1-l26"><span class="lineCounter-0-0-15 -codedoc-line-counter">26<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  kernel<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code1-l27"><span class="lineCounter-0-0-15 -codedoc-line-counter">27<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content=" //Segun la tecla presionada por el usuario se define el kernel de la mascara respectiva" id="code1-l28"><span class="lineCounter-0-0-15 -codedoc-line-counter">28<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span> <span class="token comment">//Segun la tecla presionada por el usuario se define el kernel de la mascara respectiva</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code1-l29"><span class="lineCounter-0-0-15 -codedoc-line-counter">29<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="   if(u_key==1){" id="code1-l30"><span class="lineCounter-0-0-15 prim -codedoc-line-counter">30<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>   <span class="token keyword">if</span><span class="token punctuation">(</span>u_key<span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code1-l31"><span class="lineCounter-0-0-15 -codedoc-line-counter">31<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="  // emboss kernel " id="code1-l32"><span class="lineCounter-0-0-15 -codedoc-line-counter">32<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token comment">// emboss kernel </span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="  kernel[0] = -2.0; kernel[1] = -1.0; kernel[2] = 0.0;" id="code1-l33"><span class="lineCounter-0-0-15 -codedoc-line-counter">33<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  kernel<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">2.0</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1.0</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="  kernel[3] = -1.0; kernel[4] = 1.0; kernel[5] = 1.0;" id="code1-l34"><span class="lineCounter-0-0-15 -codedoc-line-counter">34<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  kernel<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1.0</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1.0</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1.0</span><span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="  kernel[6] = 0.0; kernel[7] = 1.0; kernel[8] = 2.0;" id="code1-l35"><span class="lineCounter-0-0-15 prim -codedoc-line-counter">35<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  kernel<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1.0</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2.0</span><span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code1-l36"><span class="lineCounter-0-0-15 -codedoc-line-counter">36<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="  }else if (u_key==2){" id="code1-l37"><span class="lineCounter-0-0-15 -codedoc-line-counter">37<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>u_key<span class="token operator">==</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">{</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code1-l38"><span class="lineCounter-0-0-15 -codedoc-line-counter">38<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="  // edge detection " id="code1-l39"><span class="lineCounter-0-0-15 -codedoc-line-counter">39<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token comment">// edge detection </span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="   kernel[0] = -1.0; kernel[1] = -1.0; kernel[2] = -1.0;" id="code1-l40"><span class="lineCounter-0-0-15 prim -codedoc-line-counter">40<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>   kernel<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1.0</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1.0</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1.0</span><span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="   kernel[3] = -1.0; kernel[4] = 8.0; kernel[5] = -1.0;" id="code1-l41"><span class="lineCounter-0-0-15 -codedoc-line-counter">41<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>   kernel<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1.0</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">8.0</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1.0</span><span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="   kernel[6] = -1.0; kernel[7] = -1.0; kernel[8] = -1.0;" id="code1-l42"><span class="lineCounter-0-0-15 -codedoc-line-counter">42<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>   kernel<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1.0</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1.0</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1.0</span><span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code1-l43"><span class="lineCounter-0-0-15 -codedoc-line-counter">43<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="  }else if (u_key==3){" id="code1-l44"><span class="lineCounter-0-0-15 -codedoc-line-counter">44<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>u_key<span class="token operator">==</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">{</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code1-l45"><span class="lineCounter-0-0-15 prim -codedoc-line-counter">45<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="  // sharpen kernel" id="code1-l46"><span class="lineCounter-0-0-15 -codedoc-line-counter">46<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token comment">// sharpen kernel</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="   kernel[0] = 0.0; kernel[1] = -1.0; kernel[2] = 0.0;" id="code1-l47"><span class="lineCounter-0-0-15 -codedoc-line-counter">47<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>   kernel<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1.0</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="   kernel[3] = -1.0; kernel[4] = 5.0; kernel[5] = -1.0;" id="code1-l48"><span class="lineCounter-0-0-15 -codedoc-line-counter">48<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>   kernel<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1.0</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">5.0</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1.0</span><span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="   kernel[6] = 0.0; kernel[7] = -1.0; kernel[8] = 0.0;" id="code1-l49"><span class="lineCounter-0-0-15 -codedoc-line-counter">49<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>   kernel<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1.0</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code1-l50"><span class="lineCounter-0-0-15 prim -codedoc-line-counter">50<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="  }else if (u_key==4){" id="code1-l51"><span class="lineCounter-0-0-15 -codedoc-line-counter">51<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>u_key<span class="token operator">==</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">{</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code1-l52"><span class="lineCounter-0-0-15 -codedoc-line-counter">52<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="  // top sobel" id="code1-l53"><span class="lineCounter-0-0-15 -codedoc-line-counter">53<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token comment">// top sobel</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="   kernel[0] = 1.0; kernel[1] = 2.0; kernel[2] = 1.0;" id="code1-l54"><span class="lineCounter-0-0-15 -codedoc-line-counter">54<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>   kernel<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1.0</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2.0</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1.0</span><span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="   kernel[3] = 0.0; kernel[4] = 0.0; kernel[5] = 0.0;" id="code1-l55"><span class="lineCounter-0-0-15 prim -codedoc-line-counter">55<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>   kernel<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="   kernel[6] = -1.0; kernel[7] = -2.0; kernel[8] = -1.0;" id="code1-l56"><span class="lineCounter-0-0-15 -codedoc-line-counter">56<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>   kernel<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1.0</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">2.0</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1.0</span><span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code1-l57"><span class="lineCounter-0-0-15 -codedoc-line-counter">57<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="  }else if (u_key==5){" id="code1-l58"><span class="lineCounter-0-0-15 -codedoc-line-counter">58<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>u_key<span class="token operator">==</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">{</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code1-l59"><span class="lineCounter-0-0-15 -codedoc-line-counter">59<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="  // blur kernel" id="code1-l60"><span class="lineCounter-0-0-15 prim -codedoc-line-counter">60<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token comment">// blur kernel</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="   kernel[0] = 0.0625; kernel[1] = 0.125; kernel[2] = 0.0625;" id="code1-l61"><span class="lineCounter-0-0-15 -codedoc-line-counter">61<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>   kernel<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0.0625</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0.125</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0.0625</span><span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="   kernel[3] = 0.125; kernel[4] = 0.25; kernel[5] = 0.125;" id="code1-l62"><span class="lineCounter-0-0-15 -codedoc-line-counter">62<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>   kernel<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0.125</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0.25</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0.125</span><span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="   kernel[6] = 0.0625; kernel[7] = 0.125; kernel[8] = 0.0625;" id="code1-l63"><span class="lineCounter-0-0-15 -codedoc-line-counter">63<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>   kernel<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0.0625</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0.125</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0.0625</span><span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code1-l64"><span class="lineCounter-0-0-15 -codedoc-line-counter">64<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="  }else if (u_key==6){" id="code1-l65"><span class="lineCounter-0-0-15 prim -codedoc-line-counter">65<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>u_key<span class="token operator">==</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">{</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code1-l66"><span class="lineCounter-0-0-15 -codedoc-line-counter">66<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="  // left sobel kernel" id="code1-l67"><span class="lineCounter-0-0-15 -codedoc-line-counter">67<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token comment">// left sobel kernel</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="   kernel[0] = 1.0; kernel[1] = 0.0; kernel[2] = -1.0;" id="code1-l68"><span class="lineCounter-0-0-15 -codedoc-line-counter">68<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>   kernel<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1.0</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1.0</span><span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="   kernel[3] = 2.0; kernel[4] = 0.0; kernel[5] = -2.0;" id="code1-l69"><span class="lineCounter-0-0-15 -codedoc-line-counter">69<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>   kernel<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2.0</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">2.0</span><span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="   kernel[6] = 1.0; kernel[7] = 0.0; kernel[8] = -1.0;" id="code1-l70"><span class="lineCounter-0-0-15 prim -codedoc-line-counter">70<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>   kernel<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1.0</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1.0</span><span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code1-l71"><span class="lineCounter-0-0-15 -codedoc-line-counter">71<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="  } else if (u_key==0){" id="code1-l72"><span class="lineCounter-0-0-15 -codedoc-line-counter">72<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>u_key<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code1-l73"><span class="lineCounter-0-0-15 -codedoc-line-counter">73<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="  // identity kernel values" id="code1-l74"><span class="lineCounter-0-0-15 -codedoc-line-counter">74<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token comment">// identity kernel values</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="  kernel[0] = 0.0; kernel[1] = 0.0; kernel[2] = 0.0;" id="code1-l75"><span class="lineCounter-0-0-15 prim -codedoc-line-counter">75<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  kernel<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="  kernel[3] = 0.0; kernel[4] = 1.0; kernel[5] = 0.0;" id="code1-l76"><span class="lineCounter-0-0-15 -codedoc-line-counter">76<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  kernel<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1.0</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="  kernel[6] = 0.0; kernel[7] = 0.0; kernel[8] = 0.0;" id="code1-l77"><span class="lineCounter-0-0-15 -codedoc-line-counter">77<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  kernel<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code1-l78"><span class="lineCounter-0-0-15 -codedoc-line-counter">78<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="  }" id="code1-l79"><span class="lineCounter-0-0-15 -codedoc-line-counter">79<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token punctuation">}</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code1-l80"><span class="lineCounter-0-0-15 prim -codedoc-line-counter">80<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="  //Guardar la ubicaci�n de los pixeles vecinos" id="code1-l81"><span class="lineCounter-0-0-15 -codedoc-line-counter">81<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token comment">//Guardar la ubicaci�n de los pixeles vecinos</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="    offset[0] = vec2(-stepSize.x, -stepSize.y); // top left" id="code1-l82"><span class="lineCounter-0-0-15 -codedoc-line-counter">82<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    offset<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">vec2</span><span class="token punctuation">(</span><span class="token operator">-</span>stepSize<span class="token punctuation">.</span>x<span class="token punctuation">,</span> <span class="token operator">-</span>stepSize<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// top left</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="    offset[1] = vec2(0.0, -stepSize.y); // top middle" id="code1-l83"><span class="lineCounter-0-0-15 -codedoc-line-counter">83<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    offset<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">vec2</span><span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token operator">-</span>stepSize<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// top middle</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="    offset[2] = vec2(stepSize.x, -stepSize.y); // top right" id="code1-l84"><span class="lineCounter-0-0-15 -codedoc-line-counter">84<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    offset<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">vec2</span><span class="token punctuation">(</span>stepSize<span class="token punctuation">.</span>x<span class="token punctuation">,</span> <span class="token operator">-</span>stepSize<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// top right</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="    offset[3] = vec2(-stepSize.x, 0.0); // middle left" id="code1-l85"><span class="lineCounter-0-0-15 prim -codedoc-line-counter">85<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    offset<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">vec2</span><span class="token punctuation">(</span><span class="token operator">-</span>stepSize<span class="token punctuation">.</span>x<span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// middle left</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="    offset[4] = vec2(0.0, 0.0); //middle" id="code1-l86"><span class="lineCounter-0-0-15 -codedoc-line-counter">86<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    offset<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">vec2</span><span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//middle</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="    offset[5] = vec2(stepSize.x, 0.0); //middle right" id="code1-l87"><span class="lineCounter-0-0-15 -codedoc-line-counter">87<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    offset<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">vec2</span><span class="token punctuation">(</span>stepSize<span class="token punctuation">.</span>x<span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//middle right</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="    offset[6] = vec2(-stepSize.x, stepSize.y); //bottom left" id="code1-l88"><span class="lineCounter-0-0-15 -codedoc-line-counter">88<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    offset<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">vec2</span><span class="token punctuation">(</span><span class="token operator">-</span>stepSize<span class="token punctuation">.</span>x<span class="token punctuation">,</span> stepSize<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//bottom left</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="    offset[7] = vec2(0.0, stepSize.y); //bottom middle" id="code1-l89"><span class="lineCounter-0-0-15 -codedoc-line-counter">89<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    offset<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">vec2</span><span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">,</span> stepSize<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//bottom middle</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="    offset[8] = vec2(stepSize.x, stepSize.y); //bottom right" id="code1-l90"><span class="lineCounter-0-0-15 prim -codedoc-line-counter">90<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    offset<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">vec2</span><span class="token punctuation">(</span>stepSize<span class="token punctuation">.</span>x<span class="token punctuation">,</span> stepSize<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//bottom right</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code1-l91"><span class="lineCounter-0-0-15 -codedoc-line-counter">91<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="    //Por cada pixel vecino" id="code1-l92"><span class="lineCounter-0-0-15 -codedoc-line-counter">92<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token comment">//Por cada pixel vecino</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="    for(int i = 0; i<9; i++){" id="code1-l93"><span class="lineCounter-0-0-15 -codedoc-line-counter">93<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">9</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="        //sample a 3x3 grid of pixels" id="code1-l94"><span class="lineCounter-0-0-15 -codedoc-line-counter">94<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token comment">//sample a 3x3 grid of pixels</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="        vec4 color = texture2D(u_img, uv + offset[i]);" id="code1-l95"><span class="lineCounter-0-0-15 prim -codedoc-line-counter">95<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token keyword">vec4</span> color <span class="token operator">=</span> <span class="token function">texture2D</span><span class="token punctuation">(</span>u_img<span class="token punctuation">,</span> uv <span class="token operator">+</span> offset<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code1-l96"><span class="lineCounter-0-0-15 -codedoc-line-counter">96<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="        //multiplicar el color del pixel por el valor correspondiente del kernel y " id="code1-l97"><span class="lineCounter-0-0-15 -codedoc-line-counter">97<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token comment">//multiplicar el color del pixel por el valor correspondiente del kernel y </span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="        // a&amp;ntilde;adirlo al valor total de la convolucion" id="code1-l98"><span class="lineCounter-0-0-15 -codedoc-line-counter">98<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token comment">// a&amp;ntilde;adirlo al valor total de la convolucion</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="        conv += color * kernel[i];" id="code1-l99"><span class="lineCounter-0-0-15 -codedoc-line-counter">99<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        conv <span class="token operator">+=</span> color <span class="token operator">*</span> kernel<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code1-l100"><span class="lineCounter-0-0-15 prim -codedoc-line-counter">100<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="    }//for end" id="code1-l101"><span class="lineCounter-0-0-15 -codedoc-line-counter">101<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token punctuation">}</span><span class="token comment">//for end</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code1-l102"><span class="lineCounter-0-0-15 -codedoc-line-counter">102<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="  // Se renderiza la salida con el valor de la convolucion" id="code1-l103"><span class="lineCounter-0-0-15 -codedoc-line-counter">103<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token comment">// Se renderiza la salida con el valor de la convolucion</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="  gl_FragColor = vec4(conv.rgb, 1.0);  " id="code1-l104"><span class="lineCounter-0-0-15 -codedoc-line-counter">104<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  gl_FragColor <span class="token operator">=</span> <span class="token keyword">vec4</span><span class="token punctuation">(</span>conv<span class="token punctuation">.</span>rgb<span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  </div><br><div class="line-0-0-18  -codedoc-code-line" data-content="}" id="code1-l105"><span class="lineCounter-0-0-15 prim -codedoc-line-counter">105<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="}" id="code1-l106"><span class="lineCounter-0-0-15 -codedoc-line-counter">106<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code1-l107"><span class="lineCounter-0-0-15 prim -codedoc-line-counter">107<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br></code></pre></div><div class="tab" data-tab-title="Código Video" data-tab-id="Código Video"><pre class="with-bar"><code class="glsl -codedoc-code-snippet code-0-0-14" tabindex="0"><span class="wmbar-0-0-19"><span></span><span></span><span></span><span>webcamMask.frag</span></span><div class="line-0-0-18  -codedoc-code-line" data-content="// textura de p5" id="code2-l1"><span class="lineCounter-0-0-15 prim -codedoc-line-counter">1<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token comment">// textura de p5</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="uniform sampler2D tex0;" id="code2-l2"><span class="lineCounter-0-0-15 -codedoc-line-counter">2<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">uniform</span> <span class="token keyword">sampler2D</span> tex0<span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="//valor de la tecla presionada por el usuario" id="code2-l3"><span class="lineCounter-0-0-15 -codedoc-line-counter">3<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token comment">//valor de la tecla presionada por el usuario</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="uniform int u_key;" id="code2-l4"><span class="lineCounter-0-0-15 -codedoc-line-counter">4<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">uniform</span> <span class="token keyword">int</span> u_key<span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="//Tama&amp;ntilde;o de pixel en la pantalla" id="code2-l5"><span class="lineCounter-0-0-15 prim -codedoc-line-counter">5<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token comment">//Tama&amp;ntilde;o de pixel en la pantalla</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="uniform vec2 texelSize;" id="code2-l6"><span class="lineCounter-0-0-15 -codedoc-line-counter">6<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">uniform</span> <span class="token keyword">vec2</span> texelSize<span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code2-l7"><span class="lineCounter-0-0-15 -codedoc-line-counter">7<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="//Arreglo de 9 valores, cada uno representa un valor alrederor de un pixel (vecinos)" id="code2-l8"><span class="lineCounter-0-0-15 -codedoc-line-counter">8<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token comment">//Arreglo de 9 valores, cada uno representa un valor alrederor de un pixel (vecinos)</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="// y el pixel mismo" id="code2-l9"><span class="lineCounter-0-0-15 -codedoc-line-counter">9<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token comment">// y el pixel mismo</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="vec2 offset[9];" id="code2-l10"><span class="lineCounter-0-0-15 prim -codedoc-line-counter">10<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">vec2</span> offset<span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code2-l11"><span class="lineCounter-0-0-15 -codedoc-line-counter">11<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="// Arreglo con los valores de la matriz de convolucion a usar" id="code2-l12"><span class="lineCounter-0-0-15 -codedoc-line-counter">12<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token comment">// Arreglo con los valores de la matriz de convolucion a usar</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="float kernel[9];" id="code2-l13"><span class="lineCounter-0-0-15 -codedoc-line-counter">13<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">float</span> kernel<span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code2-l14"><span class="lineCounter-0-0-15 -codedoc-line-counter">14<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="// valor de convolucion que sera renderizado en la pantalla" id="code2-l15"><span class="lineCounter-0-0-15 prim -codedoc-line-counter">15<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token comment">// valor de convolucion que sera renderizado en la pantalla</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="vec4 conv = vec4(0.0);" id="code2-l16"><span class="lineCounter-0-0-15 -codedoc-line-counter">16<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">vec4</span> conv <span class="token operator">=</span> <span class="token keyword">vec4</span><span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code2-l17"><span class="lineCounter-0-0-15 -codedoc-line-counter">17<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="void main() {" id="code2-l18"><span class="lineCounter-0-0-15 -codedoc-line-counter">18<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code2-l19"><span class="lineCounter-0-0-15 -codedoc-line-counter">19<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content=" vec2 uv = vTexCoord;" id="code2-l20"><span class="lineCounter-0-0-15 prim -codedoc-line-counter">20<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span> <span class="token keyword">vec2</span> uv <span class="token operator">=</span> vTexCoord<span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content=" // voltear la textura para mostrarse al derecho" id="code2-l21"><span class="lineCounter-0-0-15 -codedoc-line-counter">21<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span> <span class="token comment">// voltear la textura para mostrarse al derecho</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content=" uv = 1.0 - uv;" id="code2-l22"><span class="lineCounter-0-0-15 -codedoc-line-counter">22<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span> uv <span class="token operator">=</span> <span class="token number">1.0</span> <span class="token operator">-</span> uv<span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code2-l23"><span class="lineCounter-0-0-15 -codedoc-line-counter">23<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content=" vec4 tex = texture2D(tex0, uv);" id="code2-l24"><span class="lineCounter-0-0-15 -codedoc-line-counter">24<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span> <span class="token keyword">vec4</span> tex <span class="token operator">=</span> <span class="token function">texture2D</span><span class="token punctuation">(</span>tex0<span class="token punctuation">,</span> uv<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code2-l25"><span class="lineCounter-0-0-15 prim -codedoc-line-counter">25<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content=" //Dejar valores de color originales desde el inicio" id="code2-l26"><span class="lineCounter-0-0-15 -codedoc-line-counter">26<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span> <span class="token comment">//Dejar valores de color originales desde el inicio</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code2-l27"><span class="lineCounter-0-0-15 -codedoc-line-counter">27<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="  float threshR = tex.r ;" id="code2-l28"><span class="lineCounter-0-0-15 -codedoc-line-counter">28<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token keyword">float</span> threshR <span class="token operator">=</span> tex<span class="token punctuation">.</span>r <span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="  float threshG = tex.g ;" id="code2-l29"><span class="lineCounter-0-0-15 -codedoc-line-counter">29<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token keyword">float</span> threshG <span class="token operator">=</span> tex<span class="token punctuation">.</span>g <span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="  float threshB = tex.b ;" id="code2-l30"><span class="lineCounter-0-0-15 prim -codedoc-line-counter">30<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token keyword">float</span> threshB <span class="token operator">=</span> tex<span class="token punctuation">.</span>b <span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code2-l31"><span class="lineCounter-0-0-15 -codedoc-line-counter">31<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="  vec4 thresh = vec4(threshR, threshG, threshB, 1.0);" id="code2-l32"><span class="lineCounter-0-0-15 -codedoc-line-counter">32<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token keyword">vec4</span> thresh <span class="token operator">=</span> <span class="token keyword">vec4</span><span class="token punctuation">(</span>threshR<span class="token punctuation">,</span> threshG<span class="token punctuation">,</span> threshB<span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code2-l33"><span class="lineCounter-0-0-15 -codedoc-line-counter">33<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content=" //Si la tecla es 0 se muestra el video original" id="code2-l34"><span class="lineCounter-0-0-15 -codedoc-line-counter">34<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span> <span class="token comment">//Si la tecla es 0 se muestra el video original</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content=" if (u_key==0){" id="code2-l35"><span class="lineCounter-0-0-15 prim -codedoc-line-counter">35<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span> <span class="token keyword">if</span> <span class="token punctuation">(</span>u_key<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code2-l36"><span class="lineCounter-0-0-15 -codedoc-line-counter">36<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content=" float threshR = tex.r ;" id="code2-l37"><span class="lineCounter-0-0-15 -codedoc-line-counter">37<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span> <span class="token keyword">float</span> threshR <span class="token operator">=</span> tex<span class="token punctuation">.</span>r <span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="  float threshG = tex.g ;" id="code2-l38"><span class="lineCounter-0-0-15 -codedoc-line-counter">38<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token keyword">float</span> threshG <span class="token operator">=</span> tex<span class="token punctuation">.</span>g <span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="  float threshB = tex.b ;" id="code2-l39"><span class="lineCounter-0-0-15 -codedoc-line-counter">39<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token keyword">float</span> threshB <span class="token operator">=</span> tex<span class="token punctuation">.</span>b <span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code2-l40"><span class="lineCounter-0-0-15 prim -codedoc-line-counter">40<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="  vec4 thresh = vec4(threshR, threshG, threshB, 1.0);" id="code2-l41"><span class="lineCounter-0-0-15 -codedoc-line-counter">41<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token keyword">vec4</span> thresh <span class="token operator">=</span> <span class="token keyword">vec4</span><span class="token punctuation">(</span>threshR<span class="token punctuation">,</span> threshG<span class="token punctuation">,</span> threshB<span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code2-l42"><span class="lineCounter-0-0-15 -codedoc-line-counter">42<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content=" }else if (u_key==1){" id="code2-l43"><span class="lineCounter-0-0-15 -codedoc-line-counter">43<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span> <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>u_key<span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code2-l44"><span class="lineCounter-0-0-15 -codedoc-line-counter">44<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content=" //Si la tecla es 1 se muestra la mascara correspondiente" id="code2-l45"><span class="lineCounter-0-0-15 prim -codedoc-line-counter">45<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span> <span class="token comment">//Si la tecla es 1 se muestra la mascara correspondiente</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code2-l46"><span class="lineCounter-0-0-15 -codedoc-line-counter">46<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="  float gray = (tex.r + tex.g + tex.b) / 3.0;" id="code2-l47"><span class="lineCounter-0-0-15 -codedoc-line-counter">47<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token keyword">float</span> gray <span class="token operator">=</span> <span class="token punctuation">(</span>tex<span class="token punctuation">.</span>r <span class="token operator">+</span> tex<span class="token punctuation">.</span>g <span class="token operator">+</span> tex<span class="token punctuation">.</span>b<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">3.0</span><span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code2-l48"><span class="lineCounter-0-0-15 -codedoc-line-counter">48<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="   float res = 20.0;" id="code2-l49"><span class="lineCounter-0-0-15 -codedoc-line-counter">49<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>   <span class="token keyword">float</span> res <span class="token operator">=</span> <span class="token number">20.0</span><span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="   float scl = res / (10.0);" id="code2-l50"><span class="lineCounter-0-0-15 prim -codedoc-line-counter">50<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>   <span class="token keyword">float</span> scl <span class="token operator">=</span> res <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">10.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code2-l51"><span class="lineCounter-0-0-15 -codedoc-line-counter">51<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="   float threshR = (fract(floor(tex.r*res)/scl)*scl) * gray ;" id="code2-l52"><span class="lineCounter-0-0-15 -codedoc-line-counter">52<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>   <span class="token keyword">float</span> threshR <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token function">fract</span><span class="token punctuation">(</span><span class="token function">floor</span><span class="token punctuation">(</span>tex<span class="token punctuation">.</span>r<span class="token operator">*</span>res<span class="token punctuation">)</span><span class="token operator">/</span>scl<span class="token punctuation">)</span><span class="token operator">*</span>scl<span class="token punctuation">)</span> <span class="token operator">*</span> gray <span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="   float threshG = (fract(floor(tex.g*res)/scl)*scl) * gray ;" id="code2-l53"><span class="lineCounter-0-0-15 -codedoc-line-counter">53<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>   <span class="token keyword">float</span> threshG <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token function">fract</span><span class="token punctuation">(</span><span class="token function">floor</span><span class="token punctuation">(</span>tex<span class="token punctuation">.</span>g<span class="token operator">*</span>res<span class="token punctuation">)</span><span class="token operator">/</span>scl<span class="token punctuation">)</span><span class="token operator">*</span>scl<span class="token punctuation">)</span> <span class="token operator">*</span> gray <span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="   float threshB = (fract(floor(tex.b*res)/scl)*scl) * gray ;" id="code2-l54"><span class="lineCounter-0-0-15 -codedoc-line-counter">54<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>   <span class="token keyword">float</span> threshB <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token function">fract</span><span class="token punctuation">(</span><span class="token function">floor</span><span class="token punctuation">(</span>tex<span class="token punctuation">.</span>b<span class="token operator">*</span>res<span class="token punctuation">)</span><span class="token operator">/</span>scl<span class="token punctuation">)</span><span class="token operator">*</span>scl<span class="token punctuation">)</span> <span class="token operator">*</span> gray <span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code2-l55"><span class="lineCounter-0-0-15 prim -codedoc-line-counter">55<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content=" thresh = vec4(threshR, threshG, threshB, 1.0);" id="code2-l56"><span class="lineCounter-0-0-15 -codedoc-line-counter">56<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span> thresh <span class="token operator">=</span> <span class="token keyword">vec4</span><span class="token punctuation">(</span>threshR<span class="token punctuation">,</span> threshG<span class="token punctuation">,</span> threshB<span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content=" }else if (u_key==2){" id="code2-l57"><span class="lineCounter-0-0-15 -codedoc-line-counter">57<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span> <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>u_key<span class="token operator">==</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">{</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code2-l58"><span class="lineCounter-0-0-15 -codedoc-line-counter">58<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="//Si la tecla es 2 se muestra la mascara inversa" id="code2-l59"><span class="lineCounter-0-0-15 -codedoc-line-counter">59<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token comment">//Si la tecla es 2 se muestra la mascara inversa</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code2-l60"><span class="lineCounter-0-0-15 prim -codedoc-line-counter">60<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content=" tex.rgb = 1.0 - tex.rgb;" id="code2-l61"><span class="lineCounter-0-0-15 -codedoc-line-counter">61<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span> tex<span class="token punctuation">.</span>rgb <span class="token operator">=</span> <span class="token number">1.0</span> <span class="token operator">-</span> tex<span class="token punctuation">.</span>rgb<span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content=" thresh = tex;" id="code2-l62"><span class="lineCounter-0-0-15 -codedoc-line-counter">62<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span> thresh <span class="token operator">=</span> tex<span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code2-l63"><span class="lineCounter-0-0-15 -codedoc-line-counter">63<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content=" }else if (u_key==3){" id="code2-l64"><span class="lineCounter-0-0-15 -codedoc-line-counter">64<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span> <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>u_key<span class="token operator">==</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">{</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code2-l65"><span class="lineCounter-0-0-15 prim -codedoc-line-counter">65<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content=" //Si la tecla es 3 se muestra la mascara single pass blur" id="code2-l66"><span class="lineCounter-0-0-15 -codedoc-line-counter">66<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span> <span class="token comment">//Si la tecla es 3 se muestra la mascara single pass blur</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content=" //consiste en promediar todos los pixeles vecinos del mismo, incluyendo el propio pixel" id="code2-l67"><span class="lineCounter-0-0-15 -codedoc-line-counter">67<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span> <span class="token comment">//consiste en promediar todos los pixeles vecinos del mismo, incluyendo el propio pixel</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code2-l68"><span class="lineCounter-0-0-15 -codedoc-line-counter">68<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content=" // creacion de valor del paso a dar para calcular vecinos de un pixel" id="code2-l69"><span class="lineCounter-0-0-15 -codedoc-line-counter">69<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span> <span class="token comment">// creacion de valor del paso a dar para calcular vecinos de un pixel</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content=" vec2 step =  texelSize * 4.0;" id="code2-l70"><span class="lineCounter-0-0-15 prim -codedoc-line-counter">70<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span> <span class="token keyword">vec2</span> step <span class="token operator">=</span>  texelSize <span class="token operator">*</span> <span class="token number">4.0</span><span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code2-l71"><span class="lineCounter-0-0-15 -codedoc-line-counter">71<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content=" // obtener los pixeles vecinos y sumarlos en el vector tex" id="code2-l72"><span class="lineCounter-0-0-15 -codedoc-line-counter">72<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span> <span class="token comment">// obtener los pixeles vecinos y sumarlos en el vector tex</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code2-l73"><span class="lineCounter-0-0-15 -codedoc-line-counter">73<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content=" vec4 tex = texture2D(tex0, uv); // middle middle -- el pixel actual" id="code2-l74"><span class="lineCounter-0-0-15 -codedoc-line-counter">74<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span> <span class="token keyword">vec4</span> tex <span class="token operator">=</span> <span class="token function">texture2D</span><span class="token punctuation">(</span>tex0<span class="token punctuation">,</span> uv<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// middle middle -- el pixel actual</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code2-l75"><span class="lineCounter-0-0-15 prim -codedoc-line-counter">75<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content=" tex += texture2D(tex0, uv + vec2(-step.x, -step.y)); // top left" id="code2-l76"><span class="lineCounter-0-0-15 -codedoc-line-counter">76<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span> tex <span class="token operator">+=</span> <span class="token function">texture2D</span><span class="token punctuation">(</span>tex0<span class="token punctuation">,</span> uv <span class="token operator">+</span> <span class="token keyword">vec2</span><span class="token punctuation">(</span><span class="token operator">-</span>step<span class="token punctuation">.</span>x<span class="token punctuation">,</span> <span class="token operator">-</span>step<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// top left</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content=" tex += texture2D(tex0, uv + vec2(0.0, -step.y)); // top middle" id="code2-l77"><span class="lineCounter-0-0-15 -codedoc-line-counter">77<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span> tex <span class="token operator">+=</span> <span class="token function">texture2D</span><span class="token punctuation">(</span>tex0<span class="token punctuation">,</span> uv <span class="token operator">+</span> <span class="token keyword">vec2</span><span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token operator">-</span>step<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// top middle</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content=" tex += texture2D(tex0, uv + vec2(step.x, -step.y)); // top right" id="code2-l78"><span class="lineCounter-0-0-15 -codedoc-line-counter">78<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span> tex <span class="token operator">+=</span> <span class="token function">texture2D</span><span class="token punctuation">(</span>tex0<span class="token punctuation">,</span> uv <span class="token operator">+</span> <span class="token keyword">vec2</span><span class="token punctuation">(</span>step<span class="token punctuation">.</span>x<span class="token punctuation">,</span> <span class="token operator">-</span>step<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// top right</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code2-l79"><span class="lineCounter-0-0-15 -codedoc-line-counter">79<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content=" tex += texture2D(tex0, uv + vec2(-step.x, 0.0)); //middle left" id="code2-l80"><span class="lineCounter-0-0-15 prim -codedoc-line-counter">80<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span> tex <span class="token operator">+=</span> <span class="token function">texture2D</span><span class="token punctuation">(</span>tex0<span class="token punctuation">,</span> uv <span class="token operator">+</span> <span class="token keyword">vec2</span><span class="token punctuation">(</span><span class="token operator">-</span>step<span class="token punctuation">.</span>x<span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//middle left</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content=" tex += texture2D(tex0, uv + vec2(step.x, 0.0)); //middle right" id="code2-l81"><span class="lineCounter-0-0-15 -codedoc-line-counter">81<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span> tex <span class="token operator">+=</span> <span class="token function">texture2D</span><span class="token punctuation">(</span>tex0<span class="token punctuation">,</span> uv <span class="token operator">+</span> <span class="token keyword">vec2</span><span class="token punctuation">(</span>step<span class="token punctuation">.</span>x<span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//middle right</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code2-l82"><span class="lineCounter-0-0-15 -codedoc-line-counter">82<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content=" tex += texture2D(tex0, uv + vec2(-step.x, step.y)); // bottom left" id="code2-l83"><span class="lineCounter-0-0-15 -codedoc-line-counter">83<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span> tex <span class="token operator">+=</span> <span class="token function">texture2D</span><span class="token punctuation">(</span>tex0<span class="token punctuation">,</span> uv <span class="token operator">+</span> <span class="token keyword">vec2</span><span class="token punctuation">(</span><span class="token operator">-</span>step<span class="token punctuation">.</span>x<span class="token punctuation">,</span> step<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// bottom left</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content=" tex += texture2D(tex0, uv + vec2(0.0, step.y)); // bottom middle" id="code2-l84"><span class="lineCounter-0-0-15 -codedoc-line-counter">84<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span> tex <span class="token operator">+=</span> <span class="token function">texture2D</span><span class="token punctuation">(</span>tex0<span class="token punctuation">,</span> uv <span class="token operator">+</span> <span class="token keyword">vec2</span><span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">,</span> step<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// bottom middle</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content=" tex += texture2D(tex0, uv + vec2(step.x, step.y)); // bottom right" id="code2-l85"><span class="lineCounter-0-0-15 prim -codedoc-line-counter">85<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span> tex <span class="token operator">+=</span> <span class="token function">texture2D</span><span class="token punctuation">(</span>tex0<span class="token punctuation">,</span> uv <span class="token operator">+</span> <span class="token keyword">vec2</span><span class="token punctuation">(</span>step<span class="token punctuation">.</span>x<span class="token punctuation">,</span> step<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// bottom right</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code2-l86"><span class="lineCounter-0-0-15 -codedoc-line-counter">86<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content=" // se toma el promedio de los valores sumados" id="code2-l87"><span class="lineCounter-0-0-15 -codedoc-line-counter">87<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span> <span class="token comment">// se toma el promedio de los valores sumados</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content=" tex /= 9.0;" id="code2-l88"><span class="lineCounter-0-0-15 -codedoc-line-counter">88<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span> tex <span class="token operator">/=</span> <span class="token number">9.0</span><span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code2-l89"><span class="lineCounter-0-0-15 -codedoc-line-counter">89<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content=" thresh = tex;" id="code2-l90"><span class="lineCounter-0-0-15 prim -codedoc-line-counter">90<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span> thresh <span class="token operator">=</span> tex<span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code2-l91"><span class="lineCounter-0-0-15 -codedoc-line-counter">91<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content=" }else if (u_key==4 || u_key==5){" id="code2-l92"><span class="lineCounter-0-0-15 -codedoc-line-counter">92<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span> <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>u_key<span class="token operator">==</span><span class="token number">4</span> <span class="token operator">||</span> u_key<span class="token operator">==</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">{</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code2-l93"><span class="lineCounter-0-0-15 -codedoc-line-counter">93<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content=" //Si la tecla es 4 o 5 se aplica la mascara edge detection (outline) o emboss" id="code2-l94"><span class="lineCounter-0-0-15 -codedoc-line-counter">94<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span> <span class="token comment">//Si la tecla es 4 o 5 se aplica la mascara edge detection (outline) o emboss</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="   vec4 conv = vec4(0.0);" id="code2-l95"><span class="lineCounter-0-0-15 prim -codedoc-line-counter">95<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>   <span class="token keyword">vec4</span> conv <span class="token operator">=</span> <span class="token keyword">vec4</span><span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="   if(u_key==4){" id="code2-l96"><span class="lineCounter-0-0-15 -codedoc-line-counter">96<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>   <span class="token keyword">if</span><span class="token punctuation">(</span>u_key<span class="token operator">==</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">{</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content=" // edge detection kernel" id="code2-l97"><span class="lineCounter-0-0-15 -codedoc-line-counter">97<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span> <span class="token comment">// edge detection kernel</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="  kernel[0] = -1.0; kernel[1] = -1.0; kernel[2] = -1.0;" id="code2-l98"><span class="lineCounter-0-0-15 -codedoc-line-counter">98<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  kernel<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1.0</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1.0</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1.0</span><span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="  kernel[3] = -1.0; kernel[4] = 8.0; kernel[5] = -1.0;" id="code2-l99"><span class="lineCounter-0-0-15 -codedoc-line-counter">99<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  kernel<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1.0</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">8.0</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1.0</span><span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="  kernel[6] = -1.0; kernel[7] = -1.0; kernel[8] = -1.0;" id="code2-l100"><span class="lineCounter-0-0-15 prim -codedoc-line-counter">100<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  kernel<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1.0</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1.0</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1.0</span><span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code2-l101"><span class="lineCounter-0-0-15 -codedoc-line-counter">101<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="  } if (u_key==5){" id="code2-l102"><span class="lineCounter-0-0-15 -codedoc-line-counter">102<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token punctuation">}</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>u_key<span class="token operator">==</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">{</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code2-l103"><span class="lineCounter-0-0-15 -codedoc-line-counter">103<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="  // emboss kernel values" id="code2-l104"><span class="lineCounter-0-0-15 -codedoc-line-counter">104<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token comment">// emboss kernel values</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content=" kernel[0] = -2.0; kernel[1] = -1.0; kernel[2] = 0.0;" id="code2-l105"><span class="lineCounter-0-0-15 prim -codedoc-line-counter">105<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span> kernel<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">2.0</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1.0</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content=" kernel[3] = -1.0; kernel[4] = 1.0; kernel[5] = 1.0;" id="code2-l106"><span class="lineCounter-0-0-15 -codedoc-line-counter">106<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span> kernel<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1.0</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1.0</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1.0</span><span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content=" kernel[6] = 0.0; kernel[7] = 1.0; kernel[8] = 2.0;" id="code2-l107"><span class="lineCounter-0-0-15 -codedoc-line-counter">107<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span> kernel<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1.0</span><span class="token punctuation">;</span> kernel<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2.0</span><span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="  }" id="code2-l108"><span class="lineCounter-0-0-15 -codedoc-line-counter">108<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token punctuation">}</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code2-l109"><span class="lineCounter-0-0-15 -codedoc-line-counter">109<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="  //Guardar la ubicaci�n de los pixeles vecinos" id="code2-l110"><span class="lineCounter-0-0-15 prim -codedoc-line-counter">110<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token comment">//Guardar la ubicaci�n de los pixeles vecinos</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="   offset[0] = vec2(-texelSize.x, -texelSize.y); // top left" id="code2-l111"><span class="lineCounter-0-0-15 -codedoc-line-counter">111<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>   offset<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">vec2</span><span class="token punctuation">(</span><span class="token operator">-</span>texelSize<span class="token punctuation">.</span>x<span class="token punctuation">,</span> <span class="token operator">-</span>texelSize<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// top left</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="   offset[1] = vec2(0.0, -texelSize.y); // top middle" id="code2-l112"><span class="lineCounter-0-0-15 -codedoc-line-counter">112<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>   offset<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">vec2</span><span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token operator">-</span>texelSize<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// top middle</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="   offset[2] = vec2(texelSize.x, -texelSize.y); // top right" id="code2-l113"><span class="lineCounter-0-0-15 -codedoc-line-counter">113<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>   offset<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">vec2</span><span class="token punctuation">(</span>texelSize<span class="token punctuation">.</span>x<span class="token punctuation">,</span> <span class="token operator">-</span>texelSize<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// top right</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="   offset[3] = vec2(-texelSize.x, 0.0); // middle left" id="code2-l114"><span class="lineCounter-0-0-15 -codedoc-line-counter">114<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>   offset<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">vec2</span><span class="token punctuation">(</span><span class="token operator">-</span>texelSize<span class="token punctuation">.</span>x<span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// middle left</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="   offset[4] = vec2(0.0, 0.0); //middle" id="code2-l115"><span class="lineCounter-0-0-15 prim -codedoc-line-counter">115<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>   offset<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">vec2</span><span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//middle</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="   offset[5] = vec2(texelSize.x, 0.0); //middle right" id="code2-l116"><span class="lineCounter-0-0-15 -codedoc-line-counter">116<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>   offset<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">vec2</span><span class="token punctuation">(</span>texelSize<span class="token punctuation">.</span>x<span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//middle right</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="   offset[6] = vec2(-texelSize.x, texelSize.y); //bottom left" id="code2-l117"><span class="lineCounter-0-0-15 -codedoc-line-counter">117<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>   offset<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">vec2</span><span class="token punctuation">(</span><span class="token operator">-</span>texelSize<span class="token punctuation">.</span>x<span class="token punctuation">,</span> texelSize<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//bottom left</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="   offset[7] = vec2(0.0, texelSize.y); //bottom middle" id="code2-l118"><span class="lineCounter-0-0-15 -codedoc-line-counter">118<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>   offset<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">vec2</span><span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">,</span> texelSize<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//bottom middle</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="   offset[8] = vec2(texelSize.x, texelSize.y); //bottom right" id="code2-l119"><span class="lineCounter-0-0-15 -codedoc-line-counter">119<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>   offset<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">vec2</span><span class="token punctuation">(</span>texelSize<span class="token punctuation">.</span>x<span class="token punctuation">,</span> texelSize<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//bottom right</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code2-l120"><span class="lineCounter-0-0-15 prim -codedoc-line-counter">120<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="   //Por cada pixel vecino" id="code2-l121"><span class="lineCounter-0-0-15 -codedoc-line-counter">121<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>   <span class="token comment">//Por cada pixel vecino</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="   for(int i = 0; i<9; i++){" id="code2-l122"><span class="lineCounter-0-0-15 -codedoc-line-counter">122<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>   <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">9</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="       //sample a 3x3 grid of pixels" id="code2-l123"><span class="lineCounter-0-0-15 -codedoc-line-counter">123<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>       <span class="token comment">//sample a 3x3 grid of pixels</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="       vec4 color = texture2D(tex0, uv + offset[i]);" id="code2-l124"><span class="lineCounter-0-0-15 -codedoc-line-counter">124<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>       <span class="token keyword">vec4</span> color <span class="token operator">=</span> <span class="token function">texture2D</span><span class="token punctuation">(</span>tex0<span class="token punctuation">,</span> uv <span class="token operator">+</span> offset<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code2-l125"><span class="lineCounter-0-0-15 prim -codedoc-line-counter">125<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="       //multiplicar el color del pixel por el valor correspondiente del kernel y " id="code2-l126"><span class="lineCounter-0-0-15 -codedoc-line-counter">126<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>       <span class="token comment">//multiplicar el color del pixel por el valor correspondiente del kernel y </span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="       // a&amp;ntilde;adirlo al valor total de la convolucion" id="code2-l127"><span class="lineCounter-0-0-15 -codedoc-line-counter">127<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>       <span class="token comment">// a&amp;ntilde;adirlo al valor total de la convolucion</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="       conv += color * kernel[i];" id="code2-l128"><span class="lineCounter-0-0-15 -codedoc-line-counter">128<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>       conv <span class="token operator">+=</span> color <span class="token operator">*</span> kernel<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code2-l129"><span class="lineCounter-0-0-15 -codedoc-line-counter">129<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="   }//for end" id="code2-l130"><span class="lineCounter-0-0-15 prim -codedoc-line-counter">130<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>   <span class="token punctuation">}</span><span class="token comment">//for end</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="   thresh =  vec4(conv.rgb, 1.0);" id="code2-l131"><span class="lineCounter-0-0-15 -codedoc-line-counter">131<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>   thresh <span class="token operator">=</span>  <span class="token keyword">vec4</span><span class="token punctuation">(</span>conv<span class="token punctuation">.</span>rgb<span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content=" }else{" id="code2-l132"><span class="lineCounter-0-0-15 -codedoc-line-counter">132<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span> <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code2-l133"><span class="lineCounter-0-0-15 -codedoc-line-counter">133<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content=" //Dejar valores de color originales " id="code2-l134"><span class="lineCounter-0-0-15 -codedoc-line-counter">134<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span> <span class="token comment">//Dejar valores de color originales </span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code2-l135"><span class="lineCounter-0-0-15 prim -codedoc-line-counter">135<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="  float threshR = tex.r ;" id="code2-l136"><span class="lineCounter-0-0-15 -codedoc-line-counter">136<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token keyword">float</span> threshR <span class="token operator">=</span> tex<span class="token punctuation">.</span>r <span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="  float threshG = tex.g ;" id="code2-l137"><span class="lineCounter-0-0-15 -codedoc-line-counter">137<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token keyword">float</span> threshG <span class="token operator">=</span> tex<span class="token punctuation">.</span>g <span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="  float threshB = tex.b ;" id="code2-l138"><span class="lineCounter-0-0-15 -codedoc-line-counter">138<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token keyword">float</span> threshB <span class="token operator">=</span> tex<span class="token punctuation">.</span>b <span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code2-l139"><span class="lineCounter-0-0-15 -codedoc-line-counter">139<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="  vec4 thresh = vec4(threshR, threshG, threshB, 1.0);" id="code2-l140"><span class="lineCounter-0-0-15 prim -codedoc-line-counter">140<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token keyword">vec4</span> thresh <span class="token operator">=</span> <span class="token keyword">vec4</span><span class="token punctuation">(</span>threshR<span class="token punctuation">,</span> threshG<span class="token punctuation">,</span> threshB<span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content=" }" id="code2-l141"><span class="lineCounter-0-0-15 -codedoc-line-counter">141<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span> <span class="token punctuation">}</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="" id="code2-l142"><span class="lineCounter-0-0-15 -codedoc-line-counter">142<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content=" // Se renderiza la salida con el valor de la convolucion" id="code2-l143"><span class="lineCounter-0-0-15 -codedoc-line-counter">143<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span> <span class="token comment">// Se renderiza la salida con el valor de la convolucion</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content=" gl_FragColor = thresh;" id="code2-l144"><span class="lineCounter-0-0-15 -codedoc-line-counter">144<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span> gl_FragColor <span class="token operator">=</span> thresh<span class="token punctuation">;</span></div><br><div class="line-0-0-18  -codedoc-code-line" data-content="}" id="code2-l145"><span class="lineCounter-0-0-15 prim -codedoc-line-counter">145<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span></div><br></code></pre></div></div><p>Con base en la implementación mostrada se puede evidenciar como la convolución afecta en la representación de una imagen y permite a su vez analizar propiedades que no son evidentes a la vista humana a priori. La principal aplicación de las máscaras de convolución es evidentemente en el campo de la fotografía y las aplicaciones relacionadas, en donde la lógica de los diferentes estilos y filtros que se le pueden aplicar a las imagenes está fundamentado en una operación de convolución. </p><p>Se resalta que, en el presente taller se observaron operaciones relativamente sencillas y sin mayor grado de complejidad, sin embargo, para filtros más específicos es necesario efectuar operaciones de mayor grado como por ejemplo los filtros sepia para imagenes. </p><p>Por otra parte se concluye que las máscaras de convolución tienen un alto potencial en aplicarse en el diagnóstico de trastornos visuales e incluso en la terapia del manejo de estos mismos al diseñar e implementar filtros definidos que posean las propiedades médicas necesarias para la función deseada. De igual manera en la industria del entretenimiento como los videojuegos y la producción audiovisual se abre la posibilidad de representar con mas certeza algunas características del sentido de la vista como condiciones de enfoque y perspectiva de manera más realista.</p><h1 id="referencias-y-bibliografa" class="heading-0-0-1"><span class="anchor-0-0-2" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Referencias y Bibliografía</h1><p><a href="https://docs.gimp.org/2.6/es/plug-in-convmatrix.html">Convolution Fundamentals</a></p><p><a href="https://en.wikipedia.org/wiki/Kernel_(image_processing)">Convolution Process and Kernel Fundamentals</a></p><p><a href="https://setosa.io/ev/image-kernels/">Kernel values</a></p><p><a href="https://github.com/VisualComputing2020/VisualComputing2020.github.io/tree/master/js/shaders">Image Convolution Fragment Shader Base</a></p><p><a href="https://github.com/processing/p5.js-website/tree/main/src/data/examples/assets">Video Convolution Mask Assets </a></p><p><a href="https://github.com/aferriss/p5jsShaderExamples/tree/gh-pages/4_image-effects">Image and Video Convolution Masks</a></p><p><a href="https://programmerclick.com/images/833/7140bcc7002f1d51bb30d256dcc7fee9.png">Convolution Process Image</a></p><script id="ATqFQKrusr">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("ATqFQKrusr", "7H5M9Vp+I8cVV99ELLvnzg==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script><div class="contentnav-0-0-12" data-no-search=""><a href="#antecedentes" class="h1" data-content-highlight="antecedentes">Antecedentes</a><a href="#solucin-y-resultados" class="h1" data-content-highlight="solucin-y-resultados">Solución y Resultados</a><a href="#referencias-y-bibliografa" class="h1" data-content-highlight="referencias-y-bibliografa">Referencias y Bibliografía</a></div></div><div id="-codedoc-toc" class="toc-0-0-9"><div class="content-0-0-10"><p><a href="/vc/">Home</a></p><div class="collapse-0-0-5 "><script id="NiXmv_QCgk">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("NiXmv_QCgk", "lqlJyab6eRMclBlk8Ftb8g==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script><div class="label" onclick="this.parentElement.classList.toggle('open')"><span class="text">Workshops</span><span class="icon-font closed">chevron_right</span></div><div class="content"><div class="collapse-0-0-5 "><script id="aWHImnSRSt">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("aWHImnSRSt", "lqlJyab6eRMclBlk8Ftb8g==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script><div class="label" onclick="this.parentElement.classList.toggle('open')"><span class="text">Imaging &amp; Video</span><span class="icon-font closed">chevron_right</span></div><div class="content"><div class="collapse-0-0-5 "><script id="eOQFQhfwpy">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("eOQFQhfwpy", "lqlJyab6eRMclBlk8Ftb8g==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script><div class="label" onclick="this.parentElement.classList.toggle('open')"><span class="text">Software</span><span class="icon-font closed">chevron_right</span></div><div class="content"><p><a href="/vc/docs/workshops/imagingIntro">Introducción</a>
<a href="/vc/docs/workshops/maskRGBLUMA">Mascaras de Convolución y Escala Grises</a>
<a href="/vc/docs/workshops/ascii">Ascii Art</a>
<a href="/vc/docs/workshops/photomosaic">Foto-Mosaico</a>
<a href="/vc/docs/workshops/imagingConclusion">Conclusiones y Trabajo Futuro</a></p></div></div><div class="collapse-0-0-5 "><script id="PAIXzOroSd">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("PAIXzOroSd", "lqlJyab6eRMclBlk8Ftb8g==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script><div class="label" onclick="this.parentElement.classList.toggle('open')"><span class="text">Hardware</span><span class="icon-font closed">chevron_right</span></div><div class="content"><p><a href="/vc/docs/workshops/hardwareIntro">Introducción</a>
<a href="/vc/docs/workshops/hardwareGrises">RGB y Luma</a>
<a href="/vc/docs/workshops/hardwareMascaras">Mascaras de Convolución</a>
<a href="/vc/docs/workshops/hardwareAscii">Ascii Art</a>
<a href="/vc/docs/workshops/hardwareMosaic">Foto-Mosaico</a>
<a href="/vc/docs/workshops/hardwarePerformance">Desempeño</a>
<a href="/vc/docs/workshops/hardwareConclusion">Conclusiones y Trabajo Futuro</a></p></div></div></div></div><div class="collapse-0-0-5 "><script id="oytyCqKpeH">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("oytyCqKpeH", "lqlJyab6eRMclBlk8Ftb8g==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script><div class="label" onclick="this.parentElement.classList.toggle('open')"><span class="text">Rendering</span><span class="icon-font closed">chevron_right</span></div><div class="content"><p><a href="/vc/docs/workshops/renderingIntro">Introducción</a>
<a href="/vc/docs/workshops/renderingIluminacion">Algoritmo de Visibilidad</a>
<a href="/vc/docs/workshops/renderingRasterizacion">Algoritmo Rasterización</a>
<a href="/vc/docs/workshops/renderingConclusion">Conclusiones y Trabajo Futuro</a></p></div></div></div></div><div class="collapse-0-0-5 "><script id="PrrJomYpeR">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("PrrJomYpeR", "lqlJyab6eRMclBlk8Ftb8g==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script><div class="label" onclick="this.parentElement.classList.toggle('open')"><span class="text">Team</span><span class="icon-font closed">chevron_right</span></div><div class="content"><p><a href="/vc/docs/team/LisethArevalo">Liseth Arévalo</a>
<a href="/vc/docs/team/DianaGuarin">Diana Guarín</a></p></div></div></div><div class="search-0-0-11"><script id="XbULFZofOC">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("XbULFZofOC", "MChpnTvN8BpuKyiMGzmSYw==", {"repo":"vc","user":"computacionvisual2021","root":"docs/md","pick":"\\.md$","drop":"(^_)|(\\/_)"});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script></div></div><div class="footer-0-0-8"><div class="left"><script id="IMIC_wntKt">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("IMIC_wntKt", "X5W7He+ge/Kg3B6xB+T5gg==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script></div><div class="main"><div class="inside"><a href="https://github.com/computacionvisual2021/vc/" target="_blank">GitHub</a></div></div><div class="right"><script id="oVfksohOGb">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("oVfksohOGb", "3ehN2Qj7wHC4donAKEDe0Q==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script></div></div><script id="pZSmmPchhp">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("pZSmmPchhp", "bIAidu6MCPVPBcGGWLCR6Q==", {"namespace":"/vc"});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script></body></html>